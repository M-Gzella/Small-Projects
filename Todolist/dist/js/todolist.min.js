"use strict";var todoInput=document.querySelector(".todo-input"),addBtn=document.querySelector(".add-btn"),todoList=document.querySelector(".todo-list ul"),error=document.querySelector(".alert-info"),popup=document.querySelector(".popup"),submitBtn=document.querySelector(".accept"),cancelBtn=document.querySelector(".cancel"),popupInfo=document.querySelector(".popup-info"),popupInput=document.querySelector(".popup-input"),checkForm=function(t,e){return""===t.value?!(e.textContent="Wypełnij treść zadania"):!(e.textContent="")},createNewTask=function(t){var e=JSON.parse(localStorage.getItem("data"));e.push({name:t,status:"active"}),localStorage.setItem("data",JSON.stringify(e))},refreshTaskList=function(){todoList.innerHTML="";var t=JSON.parse(localStorage.getItem("data")),t=(0===t.length?error.textContent="Brak zadań na liście":error.textContent="",t.forEach(function(t,e){var a=document.createElement("li");a.setAttribute("id",e),a.classList.add(t.status),a.innerHTML="\n            ".concat(t.name,'\n            <div class="tools">\n                <button data-id=\'').concat(e,'\' class="complete"><i class="fas fa-check"></i></button>\n                <button data-id=\'').concat(e,"' class=\"edit\">EDIT</button>\n                <button data-id='").concat(e,'\' class="delete"><i class="fas fa-times"></i></button>\n            </div>\n        '),todoList.append(a)}),document.querySelectorAll(".tools .complete")),e=document.querySelectorAll(".tools .delete"),a=document.querySelectorAll(".tools .edit");t.forEach(function(t){return t.addEventListener("click",function(){setTaskStatus(this.dataset.id)})}),e.forEach(function(t){return t.addEventListener("click",function(){deleteTask(this.dataset.id)})}),a.forEach(function(t){return t.addEventListener("click",function(){showEditPopup(this.dataset.id)})})},setTaskStatus=function(t){var e=JSON.parse(localStorage.getItem("data")),a=e[t];"completed"===a.status?a.status="active":a.status="completed",e[t]=a,localStorage.setItem("data",JSON.stringify(e)),refreshTaskList()},deleteTask=function(t){var e=JSON.parse(localStorage.getItem("data"));e.splice(t,1),localStorage.setItem("data",JSON.stringify(e)),refreshTaskList()},changeTask=function(t,e){var a=JSON.parse(localStorage.getItem("data")),o=a[t];o.name=e,a[t]=o,localStorage.setItem("data",JSON.stringify(a)),refreshTaskList()},showEditPopup=function(t){popup.style.display="flex",popup.setAttribute("data-id",t)},closePopup=function(){popup.style.display="none",popupInfo.textContent=""},checkJSON=function(t){try{JSON.parse(t)}catch(t){return!1}return!0};addBtn.addEventListener("click",function(){checkForm(todoInput,error)&&(createNewTask(todoInput.value),refreshTaskList(),todoInput.value="")}),submitBtn.addEventListener("click",function(t){checkForm(popupInput,popupInfo)&&(changeTask(popup.dataset.id,popupInput.value),refreshTaskList(),popupInput.value="",closePopup())}),cancelBtn.addEventListener("click",closePopup),todoInput.addEventListener("keyup",function(t){"Enter"===t.key&&checkForm(todoInput,error)&&(createNewTask(todoInput.value),refreshTaskList(),todoInput.value="")}),window.addEventListener("DOMContentLoaded",function(){var t;localStorage.getItem("data")&&0!==(t=localStorage.getItem("data")).length&&checkJSON(t)&&Array.isArray(JSON.parse(t))||localStorage.setItem("data",JSON.stringify([])),refreshTaskList()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL3RvZG9saXN0LmpzIl0sIm5hbWVzIjpbInRvZG9JbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEJ0biIsImVycm9yIiwicG9wdXAiLCJzdWJtaXRCdG4iLCJjYW5jZWxCdG4iLCJwb3B1cEluZm8iLCJpbnB1dCIsInRleHRDb250ZW50IiwidGFzayIsIm5hbWUiLCJ0YXNrcyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJ0b2RvTGlzdCIsInB1c2giLCJzZXRJdGVtIiwiaW5uZXJIVE1MIiwibGVuZ3RoIiwic3RyaW5naWZ5IiwiZm9yRWFjaCIsImNvbXBsZXRlQnRucyIsIm5ld0xpIiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYXBwZW5kIiwiZGVsZXRlQnRucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlZGl0QnRucyIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXR1cyIsInNldFRhc2tTdGF0dXMiLCJjb25jYXQiLCJrZXkiLCJ0aGlzIiwiZGF0YXNldCIsImlkIiwicmVmcmVzaFRhc2tMaXN0IiwiZGVsZXRlVGFzayIsImNoYW5nZVRhc2siLCJkaXNwbGF5IiwiY2xvc2VQb3B1cCIsImNyZWF0ZU5ld1Rhc2siLCJzaG93RWRpdFBvcHVwIiwic3R5bGUiLCJwb3B1cElucHV0IiwidmFsdWUiLCJzdHIiLCJjaGVja0Zvcm0iLCJkYXRhIiwiaXNBcnJheSIsImUiLCJ3aW5kb3ciLCJjaGVja0pTT04iLCJBcnJheSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsVUFBWUMsU0FBU0MsY0FBYyxhQUFhLEVBQ2hEQyxPQUFTRixTQUFTQyxjQUFjLFVBQVUsRUFEMUNGLFNBQVlDLFNBQVNDLGNBQWMsZUFBYyxFQUNqREMsTUFBU0YsU0FBU0MsY0FBYyxhQUFXLEVBRTNDRSxNQUFRSCxTQUFTQyxjQUFjLFFBQUEsRUFFL0JHLFVBQVFKLFNBQVNDLGNBQWMsU0FBUyxFQUN4Q0ksVUFBWUws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TXVDLENBQUksQ0FBQyxHQUl4Q3RDLGFBQWFJLFFBQVEsT0FBUU4sS0FBS1MsVUFBVSxFQUFFLENBQUMsRUFFbkRtQixnQkFBZ0IsQ0FDcEIsQ0FBQyIsImZpbGUiOiJwcm9qZWN0cy90b2RvbGlzdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0b2RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1pbnB1dCcpO1xyXG5jb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWJ0bicpO1xyXG5jb25zdCB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWxpc3QgdWwnKTtcclxuY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtaW5mbycpO1xyXG5cclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY2VwdCcpO1xyXG5jb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsJyk7XHJcbmNvbnN0IHBvcHVwSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1pbmZvJyk7XHJcbmNvbnN0IHBvcHVwSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtaW5wdXQnKTtcclxuXHJcblxyXG5jb25zdCBjaGVja0Zvcm0gPSAoaW5wdXQsIGVycm9yKSA9PiB7XHJcbiAgICBpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSAnV3lwZcWCbmlqIHRyZcWbxIcgemFkYW5pYSc7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlcnJvci50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVOZXdUYXNrID0gKG5hbWUpID0+IHtcclxuICAgIGxldCB0YXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGEnKSk7XHJcblxyXG4gICAgbGV0IHRhc2sgPSB7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXHJcbiAgICB9XHJcblxyXG4gICAgdGFza3MucHVzaCh0YXNrKTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YScsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XHJcbn1cclxuXHJcbmNvbnN0IHJlZnJlc2hUYXNrTGlzdCA9ICgpID0+IHtcclxuICAgIHRvZG9MaXN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgbGV0IHRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YScpKTtcclxuXHJcbiAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSAnQnJhayB6YWRhxYQgbmEgbGnFm2NpZSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVycm9yLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgdGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGFzaywga2V5KXtcclxuICAgICAgICBjb25zdCBuZXdMaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgbmV3TGkuc2V0QXR0cmlidXRlKCdpZCcsIGtleSk7XHJcbiAgICAgICAgbmV3TGkuY2xhc3NMaXN0LmFkZCh0YXNrLnN0YXR1cyk7XHJcbiAgICAgICAgbmV3TGkuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAke3Rhc2submFtZX1cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvb2xzXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtaWQ9JyR7a2V5fScgY2xhc3M9XCJjb21wbGV0ZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPScke2tleX0nIGNsYXNzPVwiZWRpdFwiPkVESVQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS1pZD0nJHtrZXl9JyBjbGFzcz1cImRlbGV0ZVwiPjxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPjwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgXHJcbiAgICAgICAgdG9kb0xpc3QuYXBwZW5kKG5ld0xpKTtcclxuICAgIH0pXHJcblxyXG4gICAgbGV0IGNvbXBsZXRlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b29scyAuY29tcGxldGUnKTtcclxuICAgIGxldCBkZWxldGVCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvb2xzIC5kZWxldGUnKTtcclxuICAgIGxldCBlZGl0QnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b29scyAuZWRpdCcpO1xyXG5cclxuICAgIGNvbXBsZXRlQnRucy5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBzZXRUYXNrU3RhdHVzKHRoaXMuZGF0YXNldC5pZCk7XHJcbiAgICB9KSlcclxuICAgIGRlbGV0ZUJ0bnMuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgZGVsZXRlVGFzayh0aGlzLmRhdGFzZXQuaWQpO1xyXG4gICAgfSkpXHJcbiAgICBlZGl0QnRucy5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBzaG93RWRpdFBvcHVwKHRoaXMuZGF0YXNldC5pZCk7XHJcbiAgICB9KSlcclxufVxyXG5cclxuY29uc3Qgc2V0VGFza1N0YXR1cyA9IChpZCkgPT4ge1xyXG4gICAgbGV0IHRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YScpKTtcclxuICAgIGxldCB0YXNrID0gdGFza3NbaWRdO1xyXG5cclxuICAgIHRhc2suc3RhdHVzPT09J2NvbXBsZXRlZCc/IHRhc2suc3RhdHVzPSdhY3RpdmUnOnRhc2suc3RhdHVzPSdjb21wbGV0ZWQnO1xyXG5cclxuICAgIHRhc2tzW2lkXSA9IHRhc2s7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YScsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XHJcbiAgICByZWZyZXNoVGFza0xpc3QoKTtcclxufVxyXG5cclxuY29uc3QgZGVsZXRlVGFzayA9IChpZCkgPT4ge1xyXG4gICAgbGV0IHRhc2tzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YScpKTtcclxuXHJcbiAgICB0YXNrcy5zcGxpY2UoaWQsIDEpO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcclxuICAgIHJlZnJlc2hUYXNrTGlzdCgpO1xyXG59XHJcblxyXG5jb25zdCBjaGFuZ2VUYXNrID0gKGlkLCBuYW1lKSA9PiB7XHJcbiAgICBsZXQgdGFza3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkYXRhJykpO1xyXG4gICAgbGV0IHRhc2sgPSB0YXNrc1tpZF07XHJcbiAgICB0YXNrLm5hbWUgPSBuYW1lO1xyXG5cclxuICAgIHRhc2tzW2lkXSA9IHRhc2s7XHJcblxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RhdGEnLCBKU09OLnN0cmluZ2lmeSh0YXNrcykpO1xyXG4gICAgcmVmcmVzaFRhc2tMaXN0KCk7XHJcbn1cclxuXHJcbmNvbnN0IHNob3dFZGl0UG9wdXAgPSAoaWQpID0+IHtcclxuICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpZCk7XHJcbn1cclxuXHJcbmNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7XHJcbiAgICBwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgcG9wdXBJbmZvLnRleHRDb250ZW50ID0gJyc7XHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrSlNPTiA9IChzdHIpID0+IHtcclxuICAgIHRyeXtcclxuICAgICAgICBKU09OLnBhcnNlKHN0cik7XHJcbiAgICB9Y2F0Y2goZSl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XHJcbiAgICBpZiAoY2hlY2tGb3JtKHRvZG9JbnB1dCwgZXJyb3IpKSB7XHJcbiAgICAgICAgY3JlYXRlTmV3VGFzayh0b2RvSW5wdXQudmFsdWUpO1xyXG4gICAgICAgIHJlZnJlc2hUYXNrTGlzdCgpO1xyXG4gICAgICAgIHRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG59KVxyXG5cclxuc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZT0+e1xyXG4gICAgaWYgKGNoZWNrRm9ybShwb3B1cElucHV0LCBwb3B1cEluZm8pKSB7XHJcbiAgICAgICAgY2hhbmdlVGFzayhwb3B1cC5kYXRhc2V0LmlkLCBwb3B1cElucHV0LnZhbHVlKTtcclxuICAgICAgICByZWZyZXNoVGFza0xpc3QoKTtcclxuICAgICAgICBwb3B1cElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xyXG4gICAgfVxyXG59KVxyXG5cclxuY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VQb3B1cClcclxuXHJcbnRvZG9JbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT57XHJcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICBpZiAoY2hlY2tGb3JtKHRvZG9JbnB1dCwgZXJyb3IpKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZU5ld1Rhc2sodG9kb0lucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgcmVmcmVzaFRhc2tMaXN0KCk7XHJcbiAgICAgICAgICAgIHRvZG9JbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCk9PntcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YScpKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGF0YScpXHJcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIWNoZWNrSlNPTihkYXRhKSkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGF0YScsIEpTT04uc3RyaW5naWZ5KFtdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KEpTT04ucGFyc2UoZGF0YSkpKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkYXRhJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgIH1cclxuICAgIHJlZnJlc2hUYXNrTGlzdCgpO1xyXG59KSJdfQ==
